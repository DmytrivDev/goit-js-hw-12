{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixebay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a', { \n    captions: true,\n    captionSelector: 'img',\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250\n });\n\nexport const renderFunc = async (data, type) => {\n    try {\n        const imgCont = document.querySelector('.images__cont');\n        let renderedHtml = '';\n    \n        data.hits.map(el => {\n            renderedHtml += `<a href=\"${el.largeImageURL}\" class=\"imagecont\">\n            <div class=\"imagephoto\">\n                <img src=\"${el.webformatURL}\" alt=\"${el.tags}\">\n            </div>\n            <span class=\"imageinfo\">\n                <span>\n                    <span>Likes</span><span>${el.likes}</span>\n                </span>\n                <span>\n                    <span>Views</span><span>${el.views}</span>\n                </span>\n                <span>\n                    <span>Comments</span><span>${el.comments}</span>\n                </span>\n                <span>\n                    <span>Downloads</span><span>${el.downloads}</span>\n                </span>\n            </span>\n        </a>`\n        });\n    \n        imgCont.insertAdjacentHTML('beforeend' , renderedHtml)\n        lightbox.refresh();\n\n        if(type === 'NewPage') {\n            const item = document.querySelector('.gallery').firstElementChild;\n            const itemHeight = item.getBoundingClientRect().height;\n\n            window.scrollBy({\n                top: itemHeight * 2,\n                behavior: \"smooth\",\n              });\n        }\n        \n\n    } catch (error) {\n        const imgCont = document.querySelector('.images__cont');\n        imgCont.innerHTML = '';\n        iziToast.show({\n            message: error,\n            position: 'topRight',\n            backgroundColor: 'red',\n            messageColor: 'white',\n            theme: 'dark',\n        });\n    }\n    \n}","import {renderFunc} from \"./render-functions\";\n\nlet page = 1;\nconst preloader = document.querySelector('.loader');\n\nexport const pixebayApi = async (word, iziToast, Axios, type, loadMoreBtn) => {\n    const imgCont = document.querySelector('.images__cont');\n\n    preloader.classList.remove('hidden');\n\n    if(type === 'loadFirst') {\n        imgCont.innerHTML = '';\n        page = 1;\n        loadMoreBtn.classList.add('hidden');\n    }\n\n    const URL = 'https://pixabay.com/api/';\n    const PAGESIZE = 15;\n    const searchParams = new URLSearchParams({\n        key: '42320940-042fd388efe736bb4087979b1',\n        q: word,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: PAGESIZE,\n        page: page,\n    });\n\n    const paramsUrl = `${URL}?${searchParams}`;\n\n    const response = await Axios.get(paramsUrl);\n    const totalItems = response.data.totalHits;\n\n    if(totalItems === 0) {\n        imgCont.innerHTML = '';\n        loadMoreBtn.classList.add('hidden');\n        iziToast.show({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n            backgroundColor: 'red',\n            messageColor: 'white',\n            theme: 'dark',\n        });\n    } else {\n        const allPages = Math.ceil(totalItems / PAGESIZE);\n\n        if(page >= allPages) {\n            loadMoreBtn.classList.add('hidden');\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n                backgroundColor: 'blue',\n                messageColor: 'white',\n                theme: 'dark',\n            });\n        } else {\n            loadMoreBtn.classList.remove('hidden');\n            page += 1;\n        }\n        \n        renderFunc(response.data, type);\n    }\n\n    preloader.classList.add('hidden');\n};","import Axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport {pixebayApi} from \"./js/pixebay-api\";\n\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.loadMore');\nlet word;\n\nform.addEventListener('submit', e => {\n    e.preventDefault();\n\n    const target = e.target;\n    word = target.elements.field.value;\n\n    if(!word) { \n        iziToast.show({\n            message: 'Please, fill an input',\n            position: 'topRight',\n            backgroundColor: 'red',\n            messageColor: 'white',\n            theme: 'dark',\n        });\n    } else { \n        pixebayApi(word, iziToast, Axios, 'loadFirst', loadMoreBtn);\n\n        target.reset();\n    }\n});\n\nloadMoreBtn.addEventListener('click', e => {\n    e.preventDefault();\n\n    pixebayApi(word, iziToast, Axios, 'NewPage', loadMoreBtn);\n});\n\n\n"],"names":["lightbox","SimpleLightbox","renderFunc","data","type","imgCont","renderedHtml","el","itemHeight","error","iziToast","page","preloader","pixebayApi","word","Axios","loadMoreBtn","URL","PAGESIZE","searchParams","paramsUrl","response","totalItems","allPages","form","e","target"],"mappings":"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"}